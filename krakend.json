

{
  "version": 3,
  "name": "smarthome-gw",
  "port": 8080,
  "timeout": "3s",
  "cache_ttl": "300s",
  "endpoints": [
    {
      "endpoint": "/health",
      "extra_config": {
        "github.com/devopsfaith/krakend/proxy": {
          "static": { "data": { "status": "ok" }, "strategy": "always" }
        }
      }
    },
    {
      "endpoint": "/automation/{*}",
      "method": "GET,POST,PUT,PATCH,DELETE,OPTIONS",
      "backend": [
        {
          "host": [ "http://automation_api:8080" ],
          "url_pattern": "/api/v1/{*}",
          "extra_config": {
            "github.com/devopsfaith/krakend/transport/http": {
              "preserve_host_header": true
            }
          }
        }
      ],
      "extra_config": {
        "github.com/devopsfaith/krakend/routers/http": {
          "input_headers":  ["Authorization", "Content-Type", "Accept", "User-Agent"],
          "output_headers": ["*"]
        }
      }
    }
  ]
}